<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SADP Agent Management System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.41.0/min/vs/editor/editor.main.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.41.0/min/vs/loader.min.js"></script>
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .step-active { background-color: #667eea; color: white; }
        .step-complete { background-color: #10b981; color: white; }
        .code-editor { min-height: 400px; border: 1px solid #e5e7eb; }
    </style>
</head>
<body class="bg-gray-50" x-data="agentManagement()">
    
    <!-- Navigation -->
    <nav class="gradient-bg text-white py-4 shadow-lg">
        <div class="container mx-auto px-6">
            <div class="flex justify-between items-center">
                <div class="flex items-center space-x-6">
                    <h1 class="text-2xl font-bold">SADP Agent Manager</h1>
                    <div class="flex space-x-4 text-sm">
                        <button @click="view = 'dashboard'" 
                                :class="view === 'dashboard' ? 'border-b-2 border-white' : ''"
                                class="pb-1 hover:border-b-2 hover:border-white/50">Dashboard</button>
                        <button @click="view = 'create'" 
                                :class="view === 'create' ? 'border-b-2 border-white' : ''"
                                class="pb-1 hover:border-b-2 hover:border-white/50">Create Agent</button>
                        <button @click="view = 'manage'" 
                                :class="view === 'manage' ? 'border-b-2 border-white' : ''"
                                class="pb-1 hover:border-b-2 hover:border-white/50">Manage Agents</button>
                        <button @click="view = 'templates'" 
                                :class="view === 'templates' ? 'border-b-2 border-white' : ''"
                                class="pb-1 hover:border-b-2 hover:border-white/50">Templates</button>
                    </div>
                </div>
                <button class="bg-white/20 px-4 py-2 rounded hover:bg-white/30 text-sm">
                    <i class="fas fa-user mr-2"></i>Admin
                </button>
            </div>
        </div>
    </nav>

    <!-- Dashboard View -->
    <div x-show="view === 'dashboard'" class="container mx-auto px-6 py-8">
        <h2 class="text-3xl font-bold mb-8">Agent Management Dashboard</h2>
        
        <!-- Statistics -->
        <div class="grid md:grid-cols-4 gap-6 mb-8">
            <div class="bg-white rounded-lg p-6 shadow">
                <div class="text-3xl font-bold text-blue-600" x-text="agents.length">8</div>
                <p class="text-gray-600">Total Agents</p>
            </div>
            <div class="bg-white rounded-lg p-6 shadow">
                <div class="text-3xl font-bold text-green-600">5</div>
                <p class="text-gray-600">Active Agents</p>
            </div>
            <div class="bg-white rounded-lg p-6 shadow">
                <div class="text-3xl font-bold text-yellow-600">2</div>
                <p class="text-gray-600">In Development</p>
            </div>
            <div class="bg-white rounded-lg p-6 shadow">
                <div class="text-3xl font-bold text-purple-600">12.4K</div>
                <p class="text-gray-600">Total Executions</p>
            </div>
        </div>

        <!-- Recent Activity -->
        <div class="bg-white rounded-lg shadow">
            <div class="p-6 border-b">
                <h3 class="text-xl font-semibold">Recent Agent Activity</h3>
            </div>
            <div class="p-6">
                <div class="space-y-4">
                    <div class="flex items-center justify-between py-3 border-b">
                        <div>
                            <span class="font-medium">Clinical Assistant v2.1</span> deployed
                            <span class="text-sm text-gray-500 ml-2">2 hours ago</span>
                        </div>
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">Success</span>
                    </div>
                    <div class="flex items-center justify-between py-3 border-b">
                        <div>
                            <span class="font-medium">Billing Agent</span> configuration updated
                            <span class="text-sm text-gray-500 ml-2">5 hours ago</span>
                        </div>
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">Updated</span>
                    </div>
                    <div class="flex items-center justify-between py-3 border-b">
                        <div>
                            <span class="font-medium">Custom OCR Agent</span> created
                            <span class="text-sm text-gray-500 ml-2">1 day ago</span>
                        </div>
                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs">New</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Create Agent View -->
    <div x-show="view === 'create'" class="container mx-auto px-6 py-8">
        <h2 class="text-3xl font-bold mb-8">Create New AI Agent</h2>
        
        <!-- Progress Steps -->
        <div class="flex items-center justify-center mb-8">
            <template x-for="(step, index) in createSteps" :key="index">
                <div class="flex items-center">
                    <div class="flex items-center">
                        <div :class="currentStep >= index + 1 ? (currentStep === index + 1 ? 'step-active' : 'step-complete') : 'bg-gray-300'"
                             class="w-10 h-10 rounded-full flex items-center justify-center text-white font-bold">
                            <span x-show="currentStep <= index + 1" x-text="index + 1"></span>
                            <i x-show="currentStep > index + 1" class="fas fa-check"></i>
                        </div>
                        <span class="ml-3 font-medium" x-text="step"></span>
                    </div>
                    <div x-show="index < createSteps.length - 1" class="w-24 h-1 bg-gray-300 mx-4">
                        <div :style="`width: ${currentStep > index + 1 ? '100%' : '0'}`" 
                             class="h-full bg-green-600 transition-all duration-300"></div>
                    </div>
                </div>
            </template>
        </div>

        <!-- Step 1: Basic Information -->
        <div x-show="currentStep === 1" class="bg-white rounded-lg shadow p-8">
            <h3 class="text-2xl font-semibold mb-6">Basic Agent Information</h3>
            
            <div class="grid md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Agent Name *</label>
                    <input type="text" x-model="newAgent.name" 
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                           placeholder="e.g., Radiology Report Analyzer">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Agent ID *</label>
                    <input type="text" x-model="newAgent.id" 
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                           placeholder="e.g., radiology_analyzer">
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Category *</label>
                    <select x-model="newAgent.category" 
                            class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500">
                        <option value="">Select Category</option>
                        <option value="clinical">Clinical</option>
                        <option value="diagnostic">Diagnostic</option>
                        <option value="administrative">Administrative</option>
                        <option value="billing">Billing</option>
                        <option value="patient_engagement">Patient Engagement</option>
                        <option value="research">Research</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Version</label>
                    <input type="text" x-model="newAgent.version" 
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                           value="1.0.0">
                </div>
                
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Description *</label>
                    <textarea x-model="newAgent.description" rows="3"
                              class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                              placeholder="Describe what this agent does..."></textarea>
                </div>
                
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tags</label>
                    <input type="text" x-model="newAgent.tags" 
                           class="w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500"
                           placeholder="radiology, imaging, diagnostic, x-ray, ct-scan">
                </div>
            </div>
            
            <div class="mt-8 flex justify-end">
                <button @click="currentStep = 2" 
                        class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
                    Next: Configure Capabilities <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Step 2: Capabilities -->
        <div x-show="currentStep === 2" class="bg-white rounded-lg shadow p-8">
            <h3 class="text-2xl font-semibold mb-6">Agent Capabilities & Input/Output</h3>
            
            <div class="space-y-6">
                <!-- Input Types -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-3">Accepted Input Types</label>
                    <div class="grid md:grid-cols-3 gap-3">
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.inputTypes" value="text" class="mr-3">
                            <i class="fas fa-font mr-2 text-gray-600"></i> Plain Text
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.inputTypes" value="json" class="mr-3">
                            <i class="fas fa-code mr-2 text-gray-600"></i> JSON
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.inputTypes" value="hl7" class="mr-3">
                            <i class="fas fa-hospital mr-2 text-gray-600"></i> HL7/FHIR
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.inputTypes" value="image" class="mr-3">
                            <i class="fas fa-image mr-2 text-gray-600"></i> Images
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.inputTypes" value="pdf" class="mr-3">
                            <i class="fas fa-file-pdf mr-2 text-gray-600"></i> PDF Documents
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.inputTypes" value="audio" class="mr-3">
                            <i class="fas fa-microphone mr-2 text-gray-600"></i> Audio
                        </label>
                    </div>
                </div>

                <!-- Capabilities -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-3">Core Capabilities</label>
                    <div class="grid md:grid-cols-2 gap-3">
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.capabilities" value="extraction" class="mr-3">
                            Data Extraction
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.capabilities" value="classification" class="mr-3">
                            Classification
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.capabilities" value="generation" class="mr-3">
                            Content Generation
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.capabilities" value="analysis" class="mr-3">
                            Analysis & Insights
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.capabilities" value="validation" class="mr-3">
                            Validation & Verification
                        </label>
                        <label class="flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="checkbox" x-model="newAgent.capabilities" value="translation" class="mr-3">
                            Translation & Conversion
                        </label>
                    </div>
                </div>

                <!-- Output Schema -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Output Schema (JSON)</label>
                    <textarea x-model="newAgent.outputSchema" rows="8"
                              class="w-full px-4 py-2 border rounded-lg font-mono text-sm focus:ring-2 focus:ring-blue-500"
                              placeholder='{
  "findings": ["string"],
  "diagnosis": {
    "primary": "string",
    "secondary": ["string"]
  },
  "confidence": 0.0,
  "recommendations": ["string"],
  "metadata": {}
}'></textarea>
                </div>
            </div>
            
            <div class="mt-8 flex justify-between">
                <button @click="currentStep = 1" 
                        class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400">
                    <i class="fas fa-arrow-left mr-2"></i> Previous
                </button>
                <button @click="currentStep = 3" 
                        class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
                    Next: POML Template <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Step 3: POML Template -->
        <div x-show="currentStep === 3" class="bg-white rounded-lg shadow p-8">
            <h3 class="text-2xl font-semibold mb-6">POML Prompt Template</h3>
            
            <div class="mb-4">
                <div class="flex justify-between items-center mb-3">
                    <label class="block text-sm font-medium text-gray-700">POML Template</label>
                    <div class="space-x-2">
                        <button @click="loadTemplate('clinical')" class="text-blue-600 hover:text-blue-800 text-sm">
                            <i class="fas fa-file-import mr-1"></i>Load Clinical Template
                        </button>
                        <button @click="loadTemplate('diagnostic')" class="text-blue-600 hover:text-blue-800 text-sm">
                            <i class="fas fa-file-import mr-1"></i>Load Diagnostic Template
                        </button>
                    </div>
                </div>
                
                <div id="poml-editor" class="code-editor"></div>
            </div>

            <div class="grid md:grid-cols-2 gap-6 mt-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Variables Used</label>
                    <div class="bg-gray-50 p-3 rounded text-sm">
                        <span class="inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded mr-2 mb-2">{{patient_data}}</span>
                        <span class="inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded mr-2 mb-2">{{medical_history}}</span>
                        <span class="inline-block bg-blue-100 text-blue-800 px-2 py-1 rounded mr-2 mb-2">{{context}}</span>
                    </div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Constraints</label>
                    <div class="space-y-2">
                        <label class="flex items-center">
                            <input type="checkbox" x-model="newAgent.constraints.hipaa" class="mr-2">
                            HIPAA Compliance Required
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" x-model="newAgent.constraints.deidentify" class="mr-2">
                            De-identify Patient Data
                        </label>
                        <label class="flex items-center">
                            <input type="checkbox" x-model="newAgent.constraints.audit" class="mr-2">
                            Full Audit Trail
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 flex justify-between">
                <button @click="currentStep = 2" 
                        class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400">
                    <i class="fas fa-arrow-left mr-2"></i> Previous
                </button>
                <button @click="currentStep = 4" 
                        class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
                    Next: Implementation <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Step 4: Implementation -->
        <div x-show="currentStep === 4" class="bg-white rounded-lg shadow p-8">
            <h3 class="text-2xl font-semibold mb-6">Agent Implementation</h3>
            
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-3">Implementation Type</label>
                <div class="grid md:grid-cols-3 gap-4">
                    <label class="border-2 rounded-lg p-4 cursor-pointer hover:border-blue-500"
                           :class="newAgent.implementationType === 'builtin' ? 'border-blue-500 bg-blue-50' : 'border-gray-300'">
                        <input type="radio" x-model="newAgent.implementationType" value="builtin" class="sr-only">
                        <div class="text-center">
                            <i class="fas fa-cube text-3xl mb-2 text-blue-600"></i>
                            <h4 class="font-semibold">Built-in AI Model</h4>
                            <p class="text-sm text-gray-600 mt-1">Use pre-configured AI models</p>
                        </div>
                    </label>
                    
                    <label class="border-2 rounded-lg p-4 cursor-pointer hover:border-blue-500"
                           :class="newAgent.implementationType === 'custom' ? 'border-blue-500 bg-blue-50' : 'border-gray-300'">
                        <input type="radio" x-model="newAgent.implementationType" value="custom" class="sr-only">
                        <div class="text-center">
                            <i class="fas fa-code text-3xl mb-2 text-purple-600"></i>
                            <h4 class="font-semibold">Custom Code</h4>
                            <p class="text-sm text-gray-600 mt-1">Write custom Python code</p>
                        </div>
                    </label>
                    
                    <label class="border-2 rounded-lg p-4 cursor-pointer hover:border-blue-500"
                           :class="newAgent.implementationType === 'api' ? 'border-blue-500 bg-blue-50' : 'border-gray-300'">
                        <input type="radio" x-model="newAgent.implementationType" value="api" class="sr-only">
                        <div class="text-center">
                            <i class="fas fa-plug text-3xl mb-2 text-green-600"></i>
                            <h4 class="font-semibold">External API</h4>
                            <p class="text-sm text-gray-600 mt-1">Connect to external service</p>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Built-in Model Selection -->
            <div x-show="newAgent.implementationType === 'builtin'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Select AI Model</label>
                    <select x-model="newAgent.model" class="w-full px-4 py-2 border rounded-lg">
                        <option value="gemini-pro">Google Gemini Pro</option>
                        <option value="palm-2">Google PaLM 2</option>
                        <option value="gpt-4">OpenAI GPT-4</option>
                        <option value="claude-3">Anthropic Claude 3</option>
                        <option value="llama-2">Meta Llama 2</option>
                    </select>
                </div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Temperature</label>
                        <input type="range" x-model="newAgent.temperature" min="0" max="1" step="0.1" class="w-full">
                        <span class="text-sm text-gray-600" x-text="newAgent.temperature"></span>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Max Tokens</label>
                        <input type="number" x-model="newAgent.maxTokens" class="w-full px-4 py-2 border rounded-lg">
                    </div>
                </div>
            </div>

            <!-- Custom Code Editor -->
            <div x-show="newAgent.implementationType === 'custom'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Python Implementation</label>
                    <div id="code-editor" class="code-editor"></div>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Required Dependencies</label>
                    <textarea x-model="newAgent.dependencies" rows="3" 
                              class="w-full px-4 py-2 border rounded-lg font-mono text-sm"
                              placeholder="numpy==1.24.0&#10;pandas==2.0.0&#10;scikit-learn==1.3.0"></textarea>
                </div>
            </div>

            <!-- External API Configuration -->
            <div x-show="newAgent.implementationType === 'api'" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">API Endpoint</label>
                    <input type="url" x-model="newAgent.apiEndpoint" 
                           class="w-full px-4 py-2 border rounded-lg"
                           placeholder="https://api.example.com/analyze">
                </div>
                
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Authentication Type</label>
                        <select x-model="newAgent.authType" class="w-full px-4 py-2 border rounded-lg">
                            <option value="none">None</option>
                            <option value="bearer">Bearer Token</option>
                            <option value="api_key">API Key</option>
                            <option value="oauth2">OAuth 2.0</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Timeout (seconds)</label>
                        <input type="number" x-model="newAgent.timeout" 
                               class="w-full px-4 py-2 border rounded-lg" value="30">
                    </div>
                </div>
            </div>
            
            <div class="mt-8 flex justify-between">
                <button @click="currentStep = 3" 
                        class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400">
                    <i class="fas fa-arrow-left mr-2"></i> Previous
                </button>
                <button @click="currentStep = 5" 
                        class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700">
                    Next: Testing <i class="fas fa-arrow-right ml-2"></i>
                </button>
            </div>
        </div>

        <!-- Step 5: Testing & Deployment -->
        <div x-show="currentStep === 5" class="bg-white rounded-lg shadow p-8">
            <h3 class="text-2xl font-semibold mb-6">Test & Deploy Agent</h3>
            
            <!-- Test Section -->
            <div class="mb-8">
                <h4 class="text-lg font-semibold mb-4">Test Your Agent</h4>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Test Input</label>
                        <textarea x-model="testInput" rows="6" 
                                  class="w-full px-4 py-2 border rounded-lg"
                                  placeholder="Enter test data..."></textarea>
                        <button @click="testAgent()" 
                                class="mt-3 bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700">
                            <i class="fas fa-flask mr-2"></i>Run Test
                        </button>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Test Output</label>
                        <div class="bg-gray-50 p-4 rounded border h-48 overflow-auto font-mono text-sm">
                            <div x-show="!testResult">Output will appear here...</div>
                            <pre x-show="testResult" x-text="testResult"></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Deployment Options -->
            <div class="mb-8">
                <h4 class="text-lg font-semibold mb-4">Deployment Configuration</h4>
                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Deployment Environment</label>
                        <select x-model="newAgent.environment" class="w-full px-4 py-2 border rounded-lg">
                            <option value="development">Development</option>
                            <option value="staging">Staging</option>
                            <option value="production">Production</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Auto-scaling</label>
                        <div class="flex items-center space-x-4">
                            <input type="number" x-model="newAgent.minInstances" 
                                   class="w-20 px-2 py-2 border rounded" placeholder="Min">
                            <span>to</span>
                            <input type="number" x-model="newAgent.maxInstances" 
                                   class="w-20 px-2 py-2 border rounded" placeholder="Max">
                            <span>instances</span>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Resource Allocation</label>
                        <div class="space-y-2">
                            <div class="flex items-center">
                                <span class="w-20 text-sm">Memory:</span>
                                <select x-model="newAgent.memory" class="px-3 py-1 border rounded">
                                    <option value="256Mi">256 MB</option>
                                    <option value="512Mi">512 MB</option>
                                    <option value="1Gi">1 GB</option>
                                    <option value="2Gi">2 GB</option>
                                </select>
                            </div>
                            <div class="flex items-center">
                                <span class="w-20 text-sm">CPU:</span>
                                <select x-model="newAgent.cpu" class="px-3 py-1 border rounded">
                                    <option value="0.5">0.5 vCPU</option>
                                    <option value="1">1 vCPU</option>
                                    <option value="2">2 vCPU</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Monitoring</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" x-model="newAgent.monitoring.metrics" class="mr-2">
                                Enable Metrics Collection
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" x-model="newAgent.monitoring.logging" class="mr-2">
                                Enable Detailed Logging
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" x-model="newAgent.monitoring.alerts" class="mr-2">
                                Enable Alerting
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary -->
            <div class="bg-gray-50 p-6 rounded-lg mb-6">
                <h4 class="text-lg font-semibold mb-4">Deployment Summary</h4>
                <div class="grid md:grid-cols-2 gap-4 text-sm">
                    <div><strong>Agent Name:</strong> <span x-text="newAgent.name"></span></div>
                    <div><strong>Agent ID:</strong> <span x-text="newAgent.id"></span></div>
                    <div><strong>Category:</strong> <span x-text="newAgent.category"></span></div>
                    <div><strong>Version:</strong> <span x-text="newAgent.version"></span></div>
                    <div><strong>Implementation:</strong> <span x-text="newAgent.implementationType"></span></div>
                    <div><strong>Environment:</strong> <span x-text="newAgent.environment"></span></div>
                </div>
            </div>
            
            <div class="mt-8 flex justify-between">
                <button @click="currentStep = 4" 
                        class="bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400">
                    <i class="fas fa-arrow-left mr-2"></i> Previous
                </button>
                <button @click="deployAgent()" 
                        class="bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 font-semibold">
                    <i class="fas fa-rocket mr-2"></i>Deploy Agent
                </button>
            </div>
        </div>
    </div>

    <!-- Manage Agents View -->
    <div x-show="view === 'manage'" class="container mx-auto px-6 py-8">
        <h2 class="text-3xl font-bold mb-8">Manage Existing Agents</h2>
        
        <div class="bg-white rounded-lg shadow">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <input type="text" placeholder="Search agents..." 
                           class="px-4 py-2 border rounded-lg w-64">
                    <div class="space-x-2">
                        <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">
                            <i class="fas fa-sync mr-2"></i>Refresh
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Agent</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Category</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Version</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Executions</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Accuracy</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y">
                        <template x-for="agent in agents" :key="agent.id">
                            <tr class="hover:bg-gray-50">
                                <td class="px-6 py-4">
                                    <div>
                                        <div class="font-medium" x-text="agent.name"></div>
                                        <div class="text-sm text-gray-500" x-text="agent.id"></div>
                                    </div>
                                </td>
                                <td class="px-6 py-4 text-sm" x-text="agent.category"></td>
                                <td class="px-6 py-4 text-sm" x-text="agent.version"></td>
                                <td class="px-6 py-4">
                                    <span :class="{
                                        'bg-green-100 text-green-800': agent.status === 'active',
                                        'bg-yellow-100 text-yellow-800': agent.status === 'inactive',
                                        'bg-red-100 text-red-800': agent.status === 'error'
                                    }" class="px-2 py-1 rounded text-xs" x-text="agent.status"></span>
                                </td>
                                <td class="px-6 py-4 text-sm" x-text="agent.executions"></td>
                                <td class="px-6 py-4 text-sm" x-text="agent.accuracy + '%'"></td>
                                <td class="px-6 py-4 text-sm">
                                    <div class="flex space-x-2">
                                        <button class="text-blue-600 hover:text-blue-800">
                                            <i class="fas fa-edit"></i>
                                        </button>
                                        <button class="text-green-600 hover:text-green-800">
                                            <i class="fas fa-play"></i>
                                        </button>
                                        <button class="text-yellow-600 hover:text-yellow-800">
                                            <i class="fas fa-pause"></i>
                                        </button>
                                        <button class="text-red-600 hover:text-red-800">
                                            <i class="fas fa-trash"></i>
                                        </button>
                                    </div>
                                </td>
                            </tr>
                        </template>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Templates View -->
    <div x-show="view === 'templates'" class="container mx-auto px-6 py-8">
        <h2 class="text-3xl font-bold mb-8">Agent Templates Library</h2>
        
        <div class="grid md:grid-cols-3 gap-6">
            <template x-for="template in templates" :key="template.id">
                <div class="bg-white rounded-lg shadow p-6 hover:shadow-lg transition">
                    <div class="text-3xl mb-3" x-text="template.icon"></div>
                    <h3 class="text-xl font-semibold mb-2" x-text="template.name"></h3>
                    <p class="text-gray-600 text-sm mb-4" x-text="template.description"></p>
                    <div class="flex justify-between items-center">
                        <span class="text-sm text-gray-500" x-text="template.category"></span>
                        <button @click="useTemplate(template.id)" 
                                class="bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700">
                            Use Template
                        </button>
                    </div>
                </div>
            </template>
        </div>
    </div>

    <script>
        // Initialize Monaco Editor
        require.config({ paths: { vs: 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.41.0/min/vs' } });
        
        let pomlEditor, codeEditor;
        
        require(['vs/editor/editor.main'], function() {
            // POML Editor
            pomlEditor = monaco.editor.create(document.getElementById('poml-editor'), {
                value: `<prompt version="2.0">
  <system>
    You are a specialized healthcare AI agent.
    Your role is to {{agent_role}}.
  </system>
  
  <context>
    Input Data: {{input_data}}
    Patient Context: {{patient_context}}
  </context>
  
  <task>
    {{task_description}}
  </task>
  
  <output format="json">
    {{output_schema}}
  </output>
</prompt>`,
                language: 'xml',
                theme: 'vs-light',
                minimap: { enabled: false }
            });
            
            // Python Code Editor
            codeEditor = monaco.editor.create(document.getElementById('code-editor'), {
                value: `from typing import Dict, Any
import json

class CustomAgent:
    def __init__(self, config: Dict[str, Any]):
        self.config = config
        
    async def process(self, input_data: Dict[str, Any]) -> Dict[str, Any]:
        """
        Process input data and return results
        """
        # Your custom implementation here
        result = {
            "status": "completed",
            "confidence": 0.95,
            "output": {}
        }
        
        return result`,
                language: 'python',
                theme: 'vs-light',
                minimap: { enabled: false }
            });
        });

        // Alpine.js Component
        function agentManagement() {
            return {
                view: 'dashboard',
                currentStep: 1,
                createSteps: ['Basic Info', 'Capabilities', 'POML Template', 'Implementation', 'Test & Deploy'],
                testInput: '',
                testResult: null,
                
                newAgent: {
                    name: '',
                    id: '',
                    category: '',
                    version: '1.0.0',
                    description: '',
                    tags: '',
                    inputTypes: [],
                    capabilities: [],
                    outputSchema: '',
                    implementationType: 'builtin',
                    model: 'gemini-pro',
                    temperature: 0.7,
                    maxTokens: 2000,
                    dependencies: '',
                    apiEndpoint: '',
                    authType: 'none',
                    timeout: 30,
                    environment: 'development',
                    minInstances: 1,
                    maxInstances: 5,
                    memory: '512Mi',
                    cpu: '1',
                    monitoring: {
                        metrics: true,
                        logging: true,
                        alerts: false
                    },
                    constraints: {
                        hipaa: true,
                        deidentify: false,
                        audit: true
                    }
                },
                
                agents: [
                    { id: 'clinical', name: 'Clinical Assistant', category: 'Clinical', version: '2.0.1', status: 'active', executions: '5.2K', accuracy: 97.5 },
                    { id: 'document_processor', name: 'Document Processor', category: 'Administrative', version: '1.5.0', status: 'active', executions: '3.8K', accuracy: 96.2 },
                    { id: 'billing', name: 'Billing Agent', category: 'Billing', version: '1.2.3', status: 'active', executions: '2.1K', accuracy: 98.1 },
                    { id: 'medication_entry', name: 'Medication Entry', category: 'Clinical', version: '1.0.0', status: 'inactive', executions: '892', accuracy: 94.7 },
                    { id: 'lab_analyzer', name: 'Lab Result Analyzer', category: 'Diagnostic', version: '2.1.0', status: 'active', executions: '1.5K', accuracy: 97.8 }
                ],
                
                templates: [
                    { id: 'clinical_template', name: 'Clinical Analysis', icon: 'üè•', category: 'Clinical', description: 'Template for clinical data analysis and diagnosis' },
                    { id: 'document_template', name: 'Document Processing', icon: 'üìÑ', category: 'Administrative', description: 'OCR and document extraction template' },
                    { id: 'billing_template', name: 'Billing & Claims', icon: 'üí∞', category: 'Billing', description: 'Insurance claims and billing automation' },
                    { id: 'imaging_template', name: 'Medical Imaging', icon: 'üî¨', category: 'Diagnostic', description: 'Radiology and imaging analysis' },
                    { id: 'patient_template', name: 'Patient Engagement', icon: 'üë•', category: 'Engagement', description: 'Patient communication and support' },
                    { id: 'research_template', name: 'Clinical Research', icon: 'üî¨', category: 'Research', description: 'Research data analysis and insights' }
                ],
                
                testAgent() {
                    // Simulate agent testing
                    this.testResult = JSON.stringify({
                        status: 'success',
                        confidence: 0.95,
                        processing_time: '234ms',
                        output: {
                            findings: ['Test successful'],
                            recommendations: ['Agent ready for deployment']
                        }
                    }, null, 2);
                },
                
                async deployAgent() {
                    // Collect all configuration
                    const agentConfig = {
                        ...this.newAgent,
                        pomlTemplate: pomlEditor.getValue(),
                        customCode: this.newAgent.implementationType === 'custom' ? codeEditor.getValue() : null
                    };
                    
                    // Call deployment API
                    const response = await fetch('https://sadp-agent-runtime-355881591332.us-central1.run.app/agents/register', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(agentConfig)
                    });
                    
                    if (response.ok) {
                        alert('Agent deployed successfully!');
                        this.view = 'manage';
                        this.agents.push({
                            id: this.newAgent.id,
                            name: this.newAgent.name,
                            category: this.newAgent.category,
                            version: this.newAgent.version,
                            status: 'active',
                            executions: '0',
                            accuracy: 0
                        });
                    } else {
                        alert('Deployment failed. Please check configuration.');
                    }
                },
                
                loadTemplate(type) {
                    // Load predefined templates
                    const templates = {
                        clinical: `<prompt version="2.0">
  <system>
    You are an expert clinical assistant specializing in patient assessment.
    Follow evidence-based medicine guidelines.
  </system>
  <!-- Template content -->
</prompt>`,
                        diagnostic: `<prompt version="2.0">
  <system>
    You are a diagnostic imaging specialist.
    Analyze medical images and provide detailed findings.
  </system>
  <!-- Template content -->
</prompt>`
                    };
                    
                    if (pomlEditor && templates[type]) {
                        pomlEditor.setValue(templates[type]);
                    }
                },
                
                useTemplate(templateId) {
                    this.view = 'create';
                    this.currentStep = 1;
                    // Pre-fill with template data
                }
            }
        }
    </script>
</body>
</html>